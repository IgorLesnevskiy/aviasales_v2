(this["webpackJsonpavisales-v2"]=this["webpackJsonpavisales-v2"]||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){},115:function(e,t,a){},116:function(e,t,a){},117:function(e,t,a){},119:function(e,t,a){e.exports=a.p+"static/media/logo.0c089234.svg"},120:function(e,t,a){},121:function(e,t,a){"use strict";a.r(t);var n=a(31),r=a(0),c=a.n(r),i=a(19),l=a.n(i),o=a(6),s=a(9),m=a(3);var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;if("[tickets ui] TICKETS_SHOW_LOADER"===t.type)return Object(m.a)(Object(m.a)({},e),{},{loading:!0});if("[tickets ui] TICKETS_HIDE_LOADER"===t.type)return Object(m.a)(Object(m.a)({},e),{},{loading:!1});if("[tickets] TICKETS_FETCH_SUCCESS"===t.type)return Object(m.a)(Object(m.a)({},e),{},{entities:t.payload.entities,ids:t.payload.ids});if("[tickets] TICKETS_FETCH_FAILURE"===t.type)return Object(m.a)(Object(m.a)({},e),{},{error:t.payload.error});return e},d={entities:[],ids:[],loading:!0,error:null};var v=Object(o.c)({tickets:u}),f=a(7),E=a.n(f),_=a(15),p=a(21),k=a(22),b=a(61),h=a(59),g=a(48),N=a.n(g),y=a(49),O=a.n(y),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.baseURL,n=void 0===a?"":a;Object(p.a)(this,e),this.baseURL=n}return Object(k.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.request(this._buildUrl(e),Object(m.a)({method:"GET"},t))}},{key:"post",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.request(this._buildUrl(e),Object(m.a)({method:"POST",data:Object(m.a)({},t)},a))}},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return O()(Object(m.a)({url:e},t)).catch((function(e){throw Error(e)}))}},{key:"_buildUrl",value:function(e){return"".concat(this.baseURL).concat(e)}}]),e}(),S=a(29),j=a(50),x=a.n(j);function C(e){return D.apply(this,arguments)}function D(){return(D=Object(_.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(S.a)(t,[new S.b.Entity("tickets",{},{idAttribute:function(e,t,a){return H(e)},processStrategy:function(e,t,a){return Object(m.a)(Object(m.a)({},e),{},{carrierLogoUrl:I(e.carrier),currency:"RUB"})}})]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(e){var t=[e.carrier,null===e||void 0===e?void 0:e.segments.map((function(e){return e.destination+e.date}))];return x()(t.flat().join(""))}function I(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"//pics.avs.io/99/36/".concat(e,".png"):""}var w=new(function(e){Object(b.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(p.a)(this,a),(e=t.call(this,{baseURL:"https://front-test.beta.aviasales.ru"}))._searchToken=null,e}return Object(k.a)(a,[{key:"getTickets",value:function(){var e=Object(_.a)(E.a.mark((function e(){var t,a,n,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,e.next=3,this._getSearchToken();case 3:return a=e.sent,n=N()(null,{path:"tickets",queryParams:{searchId:a}}),e.abrupt("return",this.get(n).then((function(e){var a,n=(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.tickets)||[];return C(t?n.slice(0,t):n)})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getSearchToken",value:function(){var e=Object(_.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._searchToken){e.next=2;break}return e.abrupt("return",this._searchToken);case 2:return e.next=4,this.get("/search");case 4:return t=e.sent,this._searchToken=t.data.searchId,e.abrupt("return",this._searchToken);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),a}(T)),A=[function(e){var t=e.dispatch;return function(e){return function(a){e(a),"[tickets] TICKETS_GET_TICKETS"===a.type&&(t({type:"[tickets ui] TICKETS_SHOW_LOADER",payload:{}}),w.getTickets(5).then((function(e){t({type:"[tickets] TICKETS_FETCH_SUCCESS",payload:{entities:e.entities.tickets,ids:e.result}}),t({type:"[tickets ui] TICKETS_HIDE_LOADER",payload:{}})})).catch((function(e){console.error(e),t({type:"[tickets] TICKETS_FETCH_FAILURE",payload:{error:e.message}}),t({type:"[tickets ui] TICKETS_HIDE_LOADER",payload:{}})})))}}}],U=a(16),L=a(58),R=a(60),M=a(23),K=a.n(M),Y=a(51),F=a(52),B=a.n(F),q=a(24),P=(a(102),100),V=150,Z=function(e){var t=e.startScrollPosition,a=void 0===t?P:t,n=e.onScrollHandlerDelay,i=void 0===n?V:n,l=Object(r.useState)(!1),o=Object(R.a)(l,2),s=o[0],m=o[1],u=Object(r.useCallback)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;Object(Y.a)({duration:500,easing:"cubicBezier(0.215, 0.61, 0.355, 1)",targets:[document.documentElement,document.body],scrollTop:e}).finished}()}),[]);return Object(r.useEffect)((function(){var e=B()((function(e){var t=(document.scrollingElement||document.documentElement).scrollTop>a;t&&!s?m(!0):!t&&s&&m(!1)}),i);return document.addEventListener("scroll",e),function(){document.removeEventListener("scroll",e)}}),[s,i,a]),c.a.createElement("button",{className:K()("up-button",s?"is-visible":""),onClick:u},c.a.createElement(q.a,{icon:["fas","arrow-up"],className:"up-button__icon"}))};a(103),a(104);var G=function(e){return c.a.createElement("div",{className:"page"},c.a.createElement("div",{className:"page__inner"},e.children))},J=(a(105),function(e){var t=e.offsetTop,a=void 0===t?"small":t,n=e.offsetBottom,r=void 0===n?"small":n,i=e.contentAlign,l=void 0===i?"left":i,o=e.extraClasses,s=void 0===o?[]:o,m=e.children;return c.a.createElement("div",{className:K()("floor",s),"data-offset-top":a,"data-offset-bottom":r,"data-content-align":l},c.a.createElement("div",{className:"floor__inner"},m))}),W=(a(106),function(e){var t=e.imageSrc,a=void 0===t?"":t,n=e.alt,r=void 0===n?"":n,i=e.title,l=void 0===i?"":i,o=e.url,s=void 0===o?"/":o,m=e.width,u=e.target,d=void 0===u?"_blank":u;return c.a.createElement("div",{className:"logo"},c.a.createElement("a",{href:s,target:d},c.a.createElement("img",{src:a,alt:r,title:l,width:m})))}),X=(a(107),a(108),a(109),function(){return c.a.createElement("label",{className:"checkbox"},c.a.createElement("input",{type:"checkbox",className:"checkbox__input"}),c.a.createElement("div",{className:"checkbox__box"},c.a.createElement(q.a,{icon:["fas","check"],className:"checkbox__box-tick"})),c.a.createElement("div",{className:"checkbox__label"},"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"))}),z=function(e){return c.a.createElement("div",{className:"filter-panel-checkboxes-list"},c.a.createElement("div",{className:"filter-panel-checkboxes-list__row"},c.a.createElement(X,null)),c.a.createElement("div",{className:"filter-panel-checkboxes-list__row"},c.a.createElement(X,null)),c.a.createElement("div",{className:"filter-panel-checkboxes-list__row"},c.a.createElement(X,null)))},Q=function(e){var t=e.children,a=e.title;return c.a.createElement("div",{className:"filter-panel-wrapper"},c.a.createElement("div",{className:"filter-panel-wrapper__title"},a),c.a.createElement("div",{className:"filter-panel-wrapper__content"},t))},$=function(){return c.a.createElement("div",{className:"filters-bar"},Array(3).fill().map((function(e,t){return c.a.createElement("div",{className:"filters-bar__item",key:t},c.a.createElement(Q,{title:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"},c.a.createElement(z,null)))})))},ee=(a(110),a(111),a(112),a(10)),te=a.n(ee);a(114);function ae(e){var t=e.date,a=e.formatString,n=void 0===a?"YYYY-MM-DDHH:mmZ":a,r=e.originalFormatString,c=void 0===r?"YYY-MM-DDHH:mmZ":r,i=e.locale,l=void 0===i?"ru":i,o=te()(t,c,l).locale(l);return o.isValid()?o.format(n):""}function ne(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[2,0,1,1,1,2],n=Math.abs(e);return t[n%100>4&&n%100<20?2:a[n%10<5?n%10:5]]}function re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=(new Date).getTime();return"x".repeat(e).replace(/[x]/g,(function(){var e=(t+16*Math.random())%16|0;return t=Math.floor(t/16),e.toString(16)}))}var ce=re(),ie=function(){return c.a.createElement("div",{className:"checkers-bar"},c.a.createElement("div",{className:"checkers-bar__item"},c.a.createElement("label",{className:"checkers-bar-item"},c.a.createElement("input",{type:"radio",className:"checkers-bar-item__input",name:"checkers-bar-"+ce}),c.a.createElement("div",{className:"checkers-bar-item__content"},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))),c.a.createElement("div",{className:"checkers-bar__item"},c.a.createElement("label",{className:"checkers-bar-item"},c.a.createElement("input",{type:"radio",className:"checkers-bar-item__input",name:"checkers-bar-"+ce}),c.a.createElement("div",{className:"checkers-bar-item__content"},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"))))},le=function(){return c.a.createElement("div",{className:"sorters-bar"},c.a.createElement("div",{className:"sorters-bar__item"},c.a.createElement(ie,null)))},oe=a(53),se=(a(115),a(18)),me=a.n(se),ue=a(134),de=(a(116),a(117),{RUB:"ru",USD:"us",EUR:"eu"}),ve=function(e){var t=e.currency,a=void 0===t?"RUB":t,n=e.amount,r=void 0===n?0:n;return c.a.createElement("div",{className:"formatted-price","data-type":a},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RU",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=Number(e);return"number"===typeof n?n.toLocaleString(t,{maximumFractionDigits:a}):0}(r,de[a]))},fe=function(e){var t=e.id,a=e.carrier,n=e.carrierLogoUrl,r=e.currency,i=e.price,l=e.segments,o=void 0===l?[]:l,s=e.isMock;return void 0!==s&&s?c.a.createElement(_e,{infoLinesAmount:2}):c.a.createElement("div",{className:"ticket"},c.a.createElement("div",{className:"ticket__inner"},c.a.createElement("div",{className:"ticket__head"},c.a.createElement(ue.a,{container:!0,spacing:3,alignItems:"center"},c.a.createElement(ue.a,{item:!0,xs:8},c.a.createElement("div",{className:"ticket__price"},c.a.createElement(ve,{amount:i,currency:r}))),c.a.createElement(ue.a,{item:!0,xs:4},n&&c.a.createElement("div",{className:"ticket__carrier-logo"},c.a.createElement("img",{src:n,alt:a,title:a}))))),c.a.createElement("div",{className:"ticket__body"},o.map((function(e,a){return c.a.createElement("div",{className:"ticket__info-line",key:"".concat(t,"-").concat(a)},c.a.createElement(Ee,e))})))))};function Ee(e){var t=e.date,a=void 0===t?null:t,n=e.destination,r=e.origin,i=e.duration,l=e.stops,o=void 0===l?[]:l,s=function(e){var t=e.date,a=e.originalFormatString,n=void 0===a?"YYY-MM-DDHH:mmZ":a,r=e.amount,c=void 0===r?0:r,i=e.typeOfAmount,l=void 0===i?"ms":i,o=te()(t,n).add(c,l);return o.isValid()?o.format(n):""}({date:a,amount:i,typeOfAmount:"m"}),m=ae({date:a,formatString:"HH:mm"}),u=ae({date:s,formatString:"HH:mm"}),d=function(e){var t=e.duration,a=e.originTypeOfDuration,n=void 0===a?"ms":a,r=e.formatString,c=void 0===r?"YYY-MM-DDHH:mmZ":r,i=e.locale,l=void 0===i?"ru":i,o=te.a.utc(te.a.duration(t,n).asMilliseconds()).locale(l);return o.isValid()?o.format(c):""}({duration:i,originTypeOfDuration:"m",formatString:"HH\u0447 mm\u043c"});return c.a.createElement(ue.a,{container:!0,spacing:3},c.a.createElement(ue.a,{item:!0,xs:4},c.a.createElement("div",{className:"ticket-info-cell"},c.a.createElement("div",{className:"ticket-info-cell__title"},r," \u2013 ",n),c.a.createElement("div",{className:"ticket-info-cell__value"},m," \u2013 ",u))),c.a.createElement(ue.a,{item:!0,xs:4},c.a.createElement("div",{className:"ticket-info-cell"},c.a.createElement("div",{className:"ticket-info-cell__title"},"\u0412 \u043f\u0443\u0442\u0438"),c.a.createElement("div",{className:"ticket-info-cell__value"},d))),c.a.createElement(ue.a,{item:!0,xs:4},c.a.createElement("div",{className:"ticket-info-cell"},c.a.createElement("div",{className:"ticket-info-cell__title"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e.length)return"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a";var t=ne(e.length,["\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438","\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"]);return"".concat(e.length," ").concat(t)}(o)),c.a.createElement("div",{className:"ticket-info-cell__value"},o.join(", ")||"-"))))}function _e(e){var t=e.infoLinesAmount,a=void 0===t?2:t;return c.a.createElement("div",{className:"ticket"},c.a.createElement("div",{className:"ticket__inner"},c.a.createElement("div",{className:"ticket__head"},c.a.createElement(ue.a,{container:!0,spacing:3,alignItems:"center"},c.a.createElement(ue.a,{item:!0,xs:8},c.a.createElement("div",{className:"ticket__price"},c.a.createElement(me.a,null))),c.a.createElement(ue.a,{item:!0,xs:4},c.a.createElement("div",{className:"ticket__carrier-logo"},c.a.createElement(me.a,{height:"100%"}))))),c.a.createElement("div",{className:"ticket__body"},Array(a).fill().map((function(){return c.a.createElement("div",{className:"ticket__info-line",key:"mock-ticket-info-line-".concat(re())},c.a.createElement(pe,{cellsAmount:3}))})))))}function pe(e){var t=e.cellsAmount,a=void 0===t?3:t;return c.a.createElement(ue.a,{container:!0,spacing:3},Array(a).fill().map((function(){return c.a.createElement(ue.a,{item:!0,xs:4,key:"mock-ticket-info-line-".concat(re())},c.a.createElement(ke,null))})))}function ke(e){return c.a.createElement("div",{className:"ticket-info-cell"},c.a.createElement("div",{className:"ticket-info-cell__title"},c.a.createElement(me.a,null)),c.a.createElement("div",{className:"ticket-info-cell__value"},c.a.createElement(me.a,null)))}var be=Object(s.b)((function(e,t){var a=t.id;return Object(m.a)({},e.tickets.entities[a])}),null)(fe);function he(e){var t=e.ticketsAmount,a=void 0===t?3:t;return c.a.createElement("div",{className:"tickets-list"},Array(a).fill().map((function(e,t){return c.a.createElement("div",{className:"tickets-list__item",key:t},c.a.createElement(be,{isMock:!0}))})))}var ge=function(e){var t=e.getTickets,a=void 0===t?Function.prototype:t,n=e.tickets,i=void 0===n?[]:n,l=e.loading,o=void 0!==l&&l,s=e.error,m=void 0!==s&&s;return Object(r.useEffect)((function(){a()}),[a]),o?c.a.createElement(he,{ticketsAmount:3}):m?c.a.createElement("p",null,"\u0421\u0435\u0440\u0432\u0435\u0440 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u0435\u043d. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435."):c.a.createElement("div",{className:"tickets-list"},i.map((function(e){return c.a.createElement("div",{className:"tickets-list__item",key:e},c.a.createElement(be,{id:e}))})))},Ne=Object(oe.a)([function(e){return e.tickets}],(function(e){return e.ids})),ye={getTickets:function(){return{type:"[tickets] TICKETS_GET_TICKETS",payload:{}}}},Oe=Object(s.b)((function(e,t){return{tickets:Ne(e),loading:e.tickets.loading,error:e.tickets.error}}),ye)(ge),Te=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"filtered-list"},c.a.createElement("div",{className:"filtered-list__filters"},c.a.createElement($,null)),c.a.createElement("div",{className:"filtered-list__content"},c.a.createElement("div",{className:"filtered-list__sorters"},c.a.createElement(le,null)),c.a.createElement("div",{className:"filtered-list__items"},c.a.createElement(Oe,null)))))};U.b.add(L.a);var Se={imageSrc:a(119),alt:"",title:"",url:""};var je=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(G,null,c.a.createElement(J,{offsetTop:"large",offsetBottom:"large",contentAlign:"center"},c.a.createElement(W,Se)),c.a.createElement(J,{offsetTop:"none",offsettBottom:"none"},c.a.createElement(Te,null))),c.a.createElement(Z,null))},xe=(a(120),window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d),Ce=Object(n.a)(A);var De=Object(o.e)(v,xe(o.a.apply(void 0,Object(n.a)(Ce))));l.a.render(c.a.createElement(s.a,{store:De},c.a.createElement(je,null)),document.getElementById("root"))},63:function(e,t,a){e.exports=a(121)}},[[63,1,2]]]);
//# sourceMappingURL=main.312fed0f.chunk.js.map